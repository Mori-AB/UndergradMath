\setsection{Metric Spaces} \label{sec:metric}

As mentioned in the start of this chapter,
a primary goal of basic analysis
is to rigorously redefine the concept of limits.
In the casual sense,
the concept requires some notion of closeness.
Here we define closesness by measuring the distance between two points.

Now a question arises:
how do we define distance?
One could define \(\abs{x-y}\) to be the distance in \(\Rmath^n\).
However, in mathematics we will meet a variety of sets,
it is quite underwhelming to
define the distance in each of the sets
and observe their properties repeatedly.
This is also critical since
one can define various notions of distances for a given set.

Rather, as in defining real numbers,
we first list some properties that seem reasonable.
Since our intuition is based on \(\Rmath^n\),
these strongly resemble our everyday notion of distance.

\begin{itemize}
    \item Distance is always nonnegative;
    if the distance between two points are zero,
    then the two points must be equal and vice versa.
    
    \item The distance between points \(a\) and \(b\)
    is equal when \(a\) and \(b\) are interchanged;
    that is,
    the order of choosing points is irrelevant.
    
    \item There are no such things
    as ``infinitely far'' or ``infinitely close.''
    
    \item We wish a straight line to be the shortest path
    connecting two points.
\end{itemize}

It is intuitively clear that
the value of a distance should be a number.
The question is: Which number?
First, for the first property,
the number system we use must be ordered.
Also since the third property must hold,
the numbers must be in an Archimedean field.
Knowing that \(\Rmath\) is the largest Archimedean field,
we define the distance to be a (nonnegative) real number.

Hence we have formulated the following definition.

\begin{definition}[Metric Spaces]
    \label{def:metric}
    Given a set \(X\),
    the function \(d:X\times X\to\Rmath\) is called
    a \define{metric}
    if it satisfies the following:
    \begin{itemize}
        \item For any \(x,y\in X\), \(d(x,y)\ge 0\).
        Moreover, \(d(x,y)=0\) if and only if \(x=y\).

        \item For any \(x,y\in X\), \(d(x,y)=d(y,x)\).
        
        \item For any \(x,y,z\in X\), \(d(x,z)\le d(x,y)+d(y,z)\).
    \end{itemize}

    The set \(X\) equipped with a metric \(d\)
    is called a \define{metric space},
    and the elements of \(X\) are called
    \define[point]{points} in \(X\).
    If the metric should be denoted explicitly,
    then one uses the notation \((X,d)\);
    if not, then the metric function is usually omitted.
\end{definition}

Of course,
to omit the metric for a metric space
we make the following convention.
\begin{convention}
    \label{cnv:metric}
    Unless stated otherwise,
    the notation \(d(\pholder{},\pholder{})\) denotes a metric.
    If there are multiple sets,
    then the notation \(d_X\) denotes a metric
    for the metric space \(X\).
    Of course, once used in a proof,
    it will keep referring to the same metric.
\end{convention}

We see some examples of metrics.
\begin{example}
    \label{exm:metric}
    There are numerous metrics defined in \(\Rmath^n\):
    \begin{itemize}
        \item The function \(d(x,y)=\abs{x-y}\)
        is a metric on \(\Rmath^n\),
        as demonstrated in \cref{obv:absnorm}.
        
        \item The function \(d:\Rmath^n\times\Rmath^n\to\Rmath\)
        defined by
        \[
            ((x_1,\dots,x_n),(y_1,\dots,y_n))
            \mapsto\sum_{i=1}^{n}\abs{x_i-y_i}
        \]
        is a metric on \(\Rmath^n\),
        and is called the \define{taxicab distance}.

        \item The function \(d:\Rmath\times\Rmath\to\Rmath\)
        defined by
        \[
            (x,y)\mapsto
            \abs*{\frac{\abs x}{1+\abs x}-\frac{\abs y}{1+\abs y}}
        \]
        is a metric on \(\Rmath\).
    \end{itemize}

    Other sets can have metrics too:
    \begin{itemize}
        \item Given \emph{any} set \(X\),
        the function \(d:X\times X\to\Rmath\) defined by
        \[
            d(x,y)
            =\begin{cases}
                1, & (x\neq y) \\
                0 & (x=y)
            \end{cases}
        \]
        is also a metric;
        this is called the \define{discrete metric}.
        In a sense,
        it only gives the information whether two points are distinct.

        \item Let \(X\) be a metric space equipped with a metric \(d\),
        and \(A\) be a nonempty subset of \(X\).
        Then the restriction \(\rest{d}{A\times A}\) defined by
        \[
            \rest{d}{A\times A}(a_1,a_2)
            =d(a_1,a_2),
            \qquad
            \forall a_1,a_2\in A
        \]
        is a metric in \(A\).
        The \emph{induced} metric space \((A,\rest{d}{A\times A})\)
        is called a \textdef{subspace} of the metric space \((X,d)\).
        When the context is clear,
        the induced metric \(\rest{d}{A\times A}\) is omitted
        just like as in \(X\).
    \end{itemize}
\end{example}

\begin{definition}
    \label{def:eucspace}
    The set \(\Rmath^n\) equipped with the metric \(d(x,y)=\abs{x-y}\)
    is called the \define[space!Euclidean]{Euclidean space},
    or more specifically,
    a \textdef{\(n\)-dimensional Euclidean space}.
    
    From now on,
    the set \(\Rmath^n\) is always considered to be
    the \(n\)-dimensional Euclidean space,
    unless stated otherwise.
\end{definition}

Now, we name a set consisting of `close' points to a given point.

\begin{definition}[Balls]
    \label{def:ball}
    Let \(X\) be a metric space.
    Given a point \(x\) in \(X\) and \(r>0\),
    the \define[ball!open]{open ball} with center \(x\) and radius \(r\)
    is defined as
    \[
        \denote{D(x,r)}
        =\set{p\in X}{d(x,p)<r}.
    \]
    Similarly,
    the \define[ball!closed]{closed ball}
    with center \(x\) and radius \(r\)
    is defined as
    \[
        \denote{\closure D(x,r)}
        =\set{p\in X}{d(x,p)\le r}.
    \]
    When the context is clear
    ---
    for example, when there is only one ball in discussion
    ---
    some only write \(D\) or \(\closure D\).
\end{definition}

Note that closed balls contain all of their ``boundary points'',
while the open balls contain none of them.
This difference is represented by the bar notation.

Speaking of boundary points,
how can we distinguish between the open interval \((0,1)\)
and the closed interval \([0,1]\)?
Of course, an answer would be that
the latter contains \(0\) and \(1\),
while the former does not.
One might notice that
\(1\) is the least upper bound of both intervals,
but since it is a defining property of \(\Rmath\),
it is quite hard to extend that definition directly.
After all, not all sets we work with are ordered sets.

The key is to work with open balls.
If \(x\in(0,1)\),
then by taking \(r=\min\{x,1-x\}/2\)
we see that \(D(x,r)\subset(0,1)\).
Also if \(x\notin[0,1]\),
then by taking \(r=\min\{\abs{-x},\abs{x-1}\}/2\)
we see that \(D(x,r)\cap(0,1)=\varnothing\).
Finally, it is clear that for any \(r>0\),
\(D(x,r)\) has both a point in \((0,1)\) and \((0,1)\compl\).

Hence one can come up with the following definition:

\begin{definition}[Topology of metric spaces]
    \label{def:mopen}
    Let \(X\) be a metric space,
    \(E\subset X\) and \(x\in X\).
    \begin{nlist}
        \item If \(x\in E\)
        and there exists \(r>0\) such that \(D(x,r)\subset E\),
        then \(x\) is called
        an \define[point!interior]{interior point} of \(E\).
        The interior point of \(E\compl\) is called
        an \define[point!exterior]{exterior point} of \(E\).
        
        \item If the open ball \(D(x,r)\) contains points from
        both \(E\) and \(E\compl\) for any \(r>0\),
        \(x\) is said to be
        a \define[point!boundary]{boundary point} of \(E\).

        \item We define the \define{interior} of \(E\)
        as the set of all interior points of \(E\),
        and denote as \(\denote{\intr[X]E}\).
        Although we can use the notation \(\extr[X]E\)
        for the set of all exterior points of \(E\),
        but this is redundant;
        we could just use \(\intr[X]*{X\setminus E}\).

        \item We define the \define{boundary} of \(E\)
        as the set of all boundary points of \(E\),
        and denote as \(\denote{\bound[X]E}\).

        \item If \(E=\intr E\),
        then \(E\) is said to be \define{open} in \(X\).
    \end{nlist}
\end{definition}

If the space \(X\) is clear from the context,
then (as usual) we omit \(X\) and write \(\intr E\) and \(\bound E\).

We also need a different point of view;
instead of an whole open ball being in \(E\),
what about an open ball which intersects at \emph{some} point?

\begin{definition}[continues=def:mopen]
    \label{def:mclosed}
    Let \(X\) be a metric space,
    \(E\subset X\) and \(x\in X\).
    \begin{nlist}
        \setcounter{nlisti}{5}
        \item If any open ball \(D(x,r)\) contains an element of \(E\)
        distinct from \(x\) itself for any \(r>0\),
        then \(x\) is called
        a \define[point!limit]{limit point} of \(E\).
        
        \item If \(x\in E\) is not a limit point of \(E\),
        then \(x\) is called
        an \define[point!isolated]{isolated point} of \(E\).

        \item We denote the set of limit points of \(E\) by \(E'\).
        
        \item If \(E\) contains all of its limit points,
        that is, if \(E'\subset E\),
        then \(E\) is said to be \define{closed} in \(X\).
    \end{nlist}
\end{definition}

The reason for requiring the open ball of a limit point
to contain an element of \(E\) \emph{distinct} from its center
is quite straightforward:
if \(x\in E\) and \(D(x,r)\cap E=\{x\}\) for some \(r>0\),
then \(x\) does not seem like any limit;
it is ``isolated.''

Since we have defined `open' and `closed' sets,
we check if these are compatible with our previous definitions.

\begin{example}
    \label{exm:opcl}
    We first note that
    taking \(m=(a+b)/2\) and \(r=(b-a)/2\),
    the bounded open interval \((a,b)\)
    is the open ball \(D(m,r)\) in \(\Rmath\).
    However, the unbounded open interval \((-\infty,0)\)
    is clearly not an open ball.
    \begin{nlist}
        \item The bounded open interval \((a,b)\) is open in \(\Rmath\).
        Indeed, given \(x\in(a,b)\),
        let \(r=\frac{1}{2}\min\{x-a,b-x\}\).
        Then for any \(y\in(x-r,x+r)\)
        \[
            y-a
            >x-r-a
            >\frac{x-a}{2}
            >0,
            \qquad
            b-y
            >b-x-r
            >\frac{b-x}{2}
            >0;
        \]
        thus we have \((x-r,x+r)\subset(a,b)\).
        
        \item Similarly,
        the open ball \(D(x,r)\) is open in a metric space \(X\).
        However, the proof is slightly more involved than in (1).
        Note that
        our choice of \(r\) in (1) inspects the minimum distance
        from \(x\) to the boundary points.
        However,
        since there are infinitely many boundary points of \(D(x,r)\),
        taking the minimum might not guarantee a positive number.
        
        Nevertheless our geometric intuition says that
        given a point \(y\in D(x,r)\),
        the minimum distance from \(y\) to the boundary
        should be \(r-d(x,y)\).
        Hence taking \(R=\frac{1}{2}(r-d(x,y))\),
        for any \(z\in D(y,R)\) we have
        \[
            d(x,z)
            \le d(x,y)+d(y,z)
            <r+R
            =\frac{1}{2}(r+d(x,y))
            <r;
        \]
        hence \(D(y,R)\subset D(x,r)\).
        Thus \(y\) is an interior point of \(D(x,r)\),
        and since the choice of \(y\) is arbitrary,
        \(D(x,r)\) is indeed open.

        \item Now we consider the closed ball \(\closure D(x,r)\).
    \end{nlist}
\end{example}